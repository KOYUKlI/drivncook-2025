<?php

namespace App\Http\Controllers\BO;

use App\Http\Controllers\Controller;

class ApplicationController extends Controller
{
    /**
     * Display a listing of franchise applications.
     */
    public function index()
    {
        // Mock data
        $applications = [
            [
                'id' => 1,
                'name' => 'Jean Dupont',
                'email' => 'jean.dupont@email.fr',
                'territory' => 'Nice Centre',
                'status' => 'in_review',
                'step' => 'documents',
                'submitted_at' => '2024-08-20',
            ],
            [
                'id' => 2,
                'name' => 'Marie Martin',
                'email' => 'marie.martin@email.fr',
                'territory' => 'Toulouse Nord',
                'status' => 'approved',
                'step' => 'contract',
                'submitted_at' => '2024-08-15',
            ],
            [
                'id' => 3,
                'name' => 'Pierre Durand',
                'email' => 'pierre.durand@email.fr',
                'territory' => 'Bordeaux Est',
                'status' => 'rejected',
                'step' => 'interview',
                'submitted_at' => '2024-08-10',
            ],
        ];

        return view('bo.applications.index', compact('applications'));
    }

    /**
     * Display the specified application with workflow status.
     */
    public function show(string $id)
    {
        // Mock data
        $application = [
            'id' => $id,
            'name' => 'Jean Dupont',
            'email' => 'jean.dupont@email.fr',
            'phone' => '+33 6 12 34 56 78',
            'territory' => 'Nice Centre',
            'status' => 'in_review',
            'current_step' => 'documents',
            'submitted_at' => '2024-08-20',
            'workflow_steps' => [
                ['step' => 'application', 'status' => 'completed', 'date' => '2024-08-20'],
                ['step' => 'documents', 'status' => 'in_progress', 'date' => null],
                ['step' => 'interview', 'status' => 'pending', 'date' => null],
                ['step' => 'contract', 'status' => 'pending', 'date' => null],
            ],
            'documents' => [
                ['name' => 'Pièce d\'identité', 'status' => 'uploaded'],
                ['name' => 'Justificatif de revenus', 'status' => 'pending'],
                ['name' => 'Business plan', 'status' => 'uploaded'],
            ],
        ];

        return view('bo.applications.show', compact('application'));
    }
}
